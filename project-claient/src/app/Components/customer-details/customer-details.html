<div class="luxury-dashboard" dir="rtl">
  
  <header class="dashboard-header">
    <div class="header-content">
      <h1 class="gold-gradient-text">××¨×›×– ×‘×§×¨×” ×™×•×§×¨×ª×™</h1>
      <p class="subtitle">× ×™×”×•×œ ×¨×›×™×©×•×ª ×•××¢×§×‘ ×”×›× ×¡×•×ª ×‘×–××Ÿ ×××ª</p>
    </div>
    <button class="refresh-btn" (click)="getAll()">
      <mat-icon>cached</mat-icon>
      <span>×¨×¢× ×Ÿ × ×ª×•× ×™×</span>
    </button>
  </header>

  <main class="dashboard-content">
    @if (authSrv.isCustomer()) {
      <div class="luxury-card full-width animate-fade-in">
        <div class="card-header">
          <div class="icon-box gold-bg">
            <mat-icon>shopping_bag</mat-icon>
          </div>
          <h2>×”×¡×œ ×”×××•×‘×˜×— ×©×œ×™</h2>
        </div>
        <div class="table-responsive">
          <table class="luxury-table">
            <thead>
              <tr>
                <th>××ª× ×”</th>
                <th>×›××•×ª</th>
                <th>×¡×”"×›</th>
                <th>×¡×˜×˜×•×¡</th>
                <th>×¤×¢×•×œ×”</th>
              </tr>
            </thead>
            <tbody>
              @for (item of arrDetailsByGiftId; track item.id) {
                <tr class="table-row">
                  <td class="primary-cell">{{ item.giftName }}</td>
                  <td><span class="qty-badge">{{ item.quntity }}</span></td>
                  <td class="price-cell">{{ item.giftPrice * item.quntity }} â‚ª</td>
                  <td>
                    <span class="status-pill" [ngClass]="item.status === 'Confirmed' ? 'confirmed' : 'pending'">
                      {{ item.status === 'Confirmed' ? '×××•×©×¨' : '×××ª×™×Ÿ' }}
                    </span>
                  </td>
                  <td>
                    @if (item.status === 'Draft') {
                      <button class="gold-action-btn" (click)="ConfirmPurchase(item.id)">ğŸ’³ ×©×œ× ×¢×›×©×™×•</button>
                    }
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
        <div class="card-footer">
          <div class="total-box">
            <span class="label">×œ×ª×©×œ×•× ×›×•×œ×œ:</span>
            <span class="value">{{ totalAmount }} â‚ª</span>
          </div>
        </div>
      </div>
    }

    @if (authSrv.isAdmin()) {
      <div class="admin-grid">
        <section class="luxury-card animate-fade-in">
          <div class="card-header">
            <div class="icon-box gold-outline">
              <mat-icon>verified</mat-icon>
            </div>
            <h3>××™×©×•×¨ ×¡×˜×˜×•×¡×™×</h3>
          </div>
          <div class="table-scroll">
            <table class="luxury-table compact">
              <thead>
                <tr>
                  <th>×œ×§×•×—</th>
                  <th>××ª× ×”</th>
                                      @if(!authSrv.isAdmin()){

                  <th>×¤×¢×•×œ×”</th>}
                </tr>
              </thead>
              <tbody>
                @for (item of arrDetailsByGiftId; track item.id) {
                  <tr class="table-row">
                    <td>{{ item.customerName || '××•×¨×—' }}</td>
                    <td class="gold-text">{{ item.giftName }}</td>
                                        @if(!authSrv.isAdmin()){

                    <td>
                      <button class="approve-btn" (click)="ConfirmPurchase(item.id)">××©×¨ âœ…</button>
                    </td>}
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </section>

        <section class="luxury-card animate-fade-in delay-1">
          <div class="card-header">
            <div class="icon-box gold-outline">
              <mat-icon>insights</mat-icon>
            </div>
            <h3>×¤×™×¨×•×˜ ×”×›× ×¡×•×ª</h3>
          </div>
          <div class="table-scroll">
            <table class="luxury-table compact">
              <thead>
                <tr>
                  <th>×œ×§×•×—</th>
                  <th>××ª× ×”</th>
                  <th>×¡×”"×›</th>
                </tr>
              </thead>
              <tbody>
                @for (item of arrDetailsByGiftId; track item.id) {
                  <tr class="table-row">
                    <td>{{ item.customerName }}</td>
                    <td>{{ item.giftName }}</td>
                    <td class="bold-gold">{{ item.giftPrice * item.quntity }} â‚ª</td>
                  </tr>
                }
              </tbody>
            </table>
          </div>
        </section>
      </div>
    }
  </main>
</div>